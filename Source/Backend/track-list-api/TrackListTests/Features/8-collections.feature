# –ú–æ–≤–∞: uk
@epic8 @collections
–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª: –ö–µ—Ä—É–≤–∞–Ω–Ω—è –°–ø–∏—Å–∫–∞–º–∏ (–î–æ–±—ñ—Ä–∫–∞–º–∏/–ü–ª–µ–π–ª—ñ—Å—Ç–∞–º–∏)
  –Ø–∫ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á,
  –Ø —Ö–æ—á—É —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ "–°–ø–∏—Å–∫–∏" (—è–∫ –ø–ª–µ–π–ª—ñ—Å—Ç–∏ –Ω–∞ YouTube)
  –¢–∞ –≥–Ω—É—á–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏, —Ö—Ç–æ –º–æ–∂–µ —ó—Ö –±–∞—á–∏—Ç–∏ (–ø—Ä–∏–≤–∞—Ç–Ω—ñ, –ø—É–±–ª—ñ—á–Ω—ñ, –∞–±–æ –æ–∫—Ä–µ–º—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ).

  –ü–µ—Ä–µ–¥—É–º–æ–≤–∞:
    –î–∞–Ω–æ –í –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —ñ—Å–Ω—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á "user_A" (–í–ª–∞—Å–Ω–∏–∫) –∑ ID "owner-uuid"
    –î–∞–Ω–æ –í –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —ñ—Å–Ω—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á "user_B" (–ó–∞–ø—Ä–æ—à–µ–Ω–∏–π) –∑ ID "invited-uuid"
    –î–∞–Ω–æ –í –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —ñ—Å–Ω—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á "user_C" (–°—Ç–æ—Ä–æ–Ω–Ω—ñ–π)
    –î–∞–Ω–æ –í –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —ñ—Å–Ω—É—î –º–µ–¥—ñ–∞ "Dune" (Id: 2)
    –î–∞–Ω–æ –í –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —ñ—Å–Ω—É—î –º–µ–¥—ñ–∞ "Inception" (Id: 3)
    –î–∞–Ω–æ "user_A" (–í–ª–∞—Å–Ω–∏–∫) –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º—ñ

# --- US-801: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –°–ø–∏—Å–∫—É (–î–æ–±—ñ—Ä–∫–∏) (FR2) ---

  @us-801 @happy-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π —Å–ø–∏—Å–æ–∫
    –î–∞–Ω–æ "user_A" –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ "–ú–æ—ó –°–ø–∏—Å–∫–∏"
    –ö–æ–ª–∏ –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫"
    –Ü –í—ñ–Ω –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤—É "–ú–æ—ó —É–ª—é–±–ª–µ–Ω—ñ –Ω–∞—É–∫–æ–≤–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω—ñ —Ñ—ñ–ª—å–º–∏"
    –Ü –í—ñ–Ω –≤–≤–æ–¥–∏—Ç—å –æ–ø–∏—Å "–ù–∞–π–∫—Ä–∞—â–µ –∑–∞ 2020-2025"
    –Ü –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–°—Ç–≤–æ—Ä–∏—Ç–∏"
    –¢–æ–¥—ñ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å "collection_1" —É —Ç–∞–±–ª–∏—Ü—ñ `Collections`
    –Ü –ü–æ–ª–µ "OwnerId" –¥–ª—è "collection_1" –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ "owner-uuid"
    # [BRL-6] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ —Å–ø–∏—Å–æ–∫ –ø—É–±–ª—ñ—á–Ω–∏–π –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    –Ü –ü–æ–ª–µ "PrivacyLevel" –¥–ª—è "collection_1" –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è "Public"
    –Ü –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É "collection_1"

# --- US-802: –ù–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –°–ø–∏—Å–∫—É (FR2) ---

  @us-802 @happy-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –¥–æ–¥–∞—î –º–µ–¥—ñ–∞ –¥–æ —Å–ø–∏—Å–∫—É
    –î–∞–Ω–æ "user_A" —Å—Ç–≤–æ—Ä–∏–≤ —Å–ø–∏—Å–æ–∫ "collection_1"
    –Ü –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á "user_A" –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ "/media/2" (Dune)
    –ö–æ–ª–∏ –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É "–î–æ–¥–∞—Ç–∏ –¥–æ —Å–ø–∏—Å–∫—É" (–æ–∫—Ä–µ–º–∞ –≤—ñ–¥ "–≤—ñ–¥–º—ñ—Ç–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å")
    –Ü –í—ñ–Ω –æ–±–∏—Ä–∞—î "–ú–æ—ó —É–ª—é–±–ª–µ–Ω—ñ –Ω–∞—É–∫–æ–≤–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω—ñ —Ñ—ñ–ª—å–º–∏" –∑—ñ —Å–ø–∏—Å–∫—É
    –¢–æ–¥—ñ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å —É —Ç–∞–±–ª–∏—Ü—ñ `CollectionItems` (CollectionId: "collection_1", MediaId: 2)
    –Ü –í—ñ–Ω –±–∞—á–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–î–æ–¥–∞–Ω–æ –¥–æ —Å–ø–∏—Å–∫—É '–ú–æ—ó —É–ª—é–±–ª–µ–Ω—ñ –Ω–∞—É–∫–æ–≤–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω—ñ —Ñ—ñ–ª—å–º–∏'"

  @us-802 @happy-path @soft-delete
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–¥–∞–ª—è—î –º–µ–¥—ñ–∞ –∑—ñ —Å–ø–∏—Å–∫—É
    –î–∞–Ω–æ "user_A" –¥–æ–¥–∞–≤ "Dune" (Id: 2) –¥–æ —Å–ø–∏—Å–∫—É "collection_1"
    –ö–æ–ª–∏ –í—ñ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Å–ø–∏—Å–∫—É "collection_1"
    –Ü –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–í–∏–¥–∞–ª–∏—Ç–∏" –±—ñ–ª—è "Dune"
    # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ Soft Delete
    –¢–æ–¥—ñ –ü–æ–ª–µ "DeletedAt" –¥–ª—è –∑–∞–ø–∏—Å—É –≤ `CollectionItems` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å
    –Ü "Dune" –∑–Ω–∏–∫–∞—î –∑—ñ —Å–ø–∏—Å–∫—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ

# --- US-803: –ó–º—ñ–Ω–∞ –±–∞–∑–æ–≤–æ—ó –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—ñ (–ü—É–±–ª—ñ—á–Ω–∏–π/–ü—Ä–∏–≤–∞—Ç–Ω–∏–π) ---

  @us-803 @happy-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –í–ª–∞—Å–Ω–∏–∫ —Ä–æ–±–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∏–≤–∞—Ç–Ω–∏–º
    –î–∞–Ω–æ "user_A" —î –≤–ª–∞—Å–Ω–∏–∫–æ–º –ø—É–±–ª—ñ—á–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É "collection_1" (`PrivacyLevel: Public`)
    –ö–æ–ª–∏ –í—ñ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å "collection_1"
    –Ü –í—ñ–Ω –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ "–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø"
    –Ü –í—ñ–Ω –∑–º—ñ–Ω—é—î –±–∞–∑–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å –∑ "–ü—É–±–ª—ñ—á–Ω–∏–π" –Ω–∞ "–ü—Ä–∏–≤–∞—Ç–Ω–∏–π (–ª–∏—à–µ –∑–∞–ø—Ä–æ—à–µ–Ω—ñ)"
    –Ü –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–ó–±–µ—Ä–µ–≥—Ç–∏"
    –¢–æ–¥—ñ –ü–æ–ª–µ "PrivacyLevel" –¥–ª—è "collection_1" –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ "Private"
    –Ü –ü–æ–ª–µ "UpdatedAt" –¥–ª—è "collection_1" –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è

  @us-803 @negative-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –°—Ç–æ—Ä–æ–Ω–Ω—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á "user_C" –Ω–µ –±–∞—á–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–∏–π —Å–ø–∏—Å–æ–∫
    –î–∞–Ω–æ "user_A" —î –≤–ª–∞—Å–Ω–∏–∫–æ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É "collection_1" (`PrivacyLevel: Private`)
    –ö–æ–ª–∏ "user_C" (–°—Ç–æ—Ä–æ–Ω–Ω—ñ–π) –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—å "/profile/user_A" (–≤–∫–ª–∞–¥–∫–∞ "–°–ø–∏—Å–∫–∏")
    –¢–æ–¥—ñ "user_C" –ù–ï –±–∞—á–∏—Ç—å "collection_1" —É —Å–ø–∏—Å–∫—É "user_A"

# --- US-804: –ù–∞–¥–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –æ–∫—Ä–µ–º–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º (Granular Access) ---

  @us-804 @happy-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –í–ª–∞—Å–Ω–∏–∫ –Ω–∞–¥–∞—î –¥–æ—Å—Ç—É–ø "user_B" –¥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É
    –î–∞–Ω–æ "user_A" —î –≤–ª–∞—Å–Ω–∏–∫–æ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É "collection_1" (`PrivacyLevel: Private`)
    –Ü "user_B" —â–µ –Ω–µ –º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ "collection_1"
    –ö–æ–ª–∏ "user_A" –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ "–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø" –¥–ª—è "collection_1"
    –Ü –£ –ø–æ–ª—ñ "–ó–∞–ø—Ä–æ—Å–∏—Ç–∏" –≤—ñ–Ω –≤–≤–æ–¥–∏—Ç—å –Ω—ñ–∫–Ω–µ–π–º "user_B"
    –Ü –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–ù–∞–¥–∞—Ç–∏ –¥–æ—Å—Ç—É–ø"
    –¢–æ–¥—ñ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å —É `CollectionAccess` (CollectionId: "collection_1", UserId: "invited-uuid")
    –Ü "user_B" –∑'—è–≤–ª—è—î—Ç—å—Å—è —É —Å–ø–∏—Å–∫—É –ª—é–¥–µ–π –∑ –¥–æ—Å—Ç—É–ø–æ–º

  @us-804 @happy-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –ó–∞–ø—Ä–æ—à–µ–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á "user_B" –±–∞—á–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–∏–π —Å–ø–∏—Å–æ–∫
    –î–∞–Ω–æ "user_A" –Ω–∞–¥–∞–≤ "user_B" –¥–æ—Å—Ç—É–ø –¥–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É "collection_1" (`PrivacyLevel: Private`)
    –ö–æ–ª–∏ "user_B" (–ó–∞–ø—Ä–æ—à–µ–Ω–∏–π) –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—å "/profile/user_A" (–≤–∫–ª–∞–¥–∫–∞ "–°–ø–∏—Å–∫–∏")
    –¢–æ–¥—ñ "user_B" –±–∞—á–∏—Ç—å "collection_1" —É —Å–ø–∏—Å–∫—É "user_A" (–º–æ–∂–ª–∏–≤–æ, –∑ –ø–æ–∑–Ω–∞—á–∫–æ—é "–ù–∞–¥–∞–Ω–æ –¥–æ—Å—Ç—É–ø")

  @us-804 @happy-path
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –í–ª–∞—Å–Ω–∏–∫ –∑–∞–±–∏—Ä–∞—î –¥–æ—Å—Ç—É–ø —É "user_B"
    –î–∞–Ω–æ "user_A" –Ω–∞–¥–∞–≤ "user_B" –¥–æ—Å—Ç—É–ø –¥–æ "collection_1"
    –ö–æ–ª–∏ "user_A" –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ "–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø"
    –Ü –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–í–∏–¥–∞–ª–∏—Ç–∏ –¥–æ—Å—Ç—É–ø" –±—ñ–ª—è "user_B"
    –¢–æ–¥—ñ –ó–∞–ø–∏—Å (CollectionId: "collection_1", UserId: "invited-uuid") –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∑ `CollectionAccess`

# --- US-805: –í–∏–¥–∞–ª–µ–Ω–Ω—è –°–ø–∏—Å–∫—É (Soft Delete) ---

  @us-805 @happy-path @soft-delete
  –°—Ü–µ–Ω–∞—Ä—ñ–π: –í–ª–∞—Å–Ω–∏–∫ (–º'—è–∫–æ) –≤–∏–¥–∞–ª—è—î —Å–≤—ñ–π —Å–ø–∏—Å–æ–∫
    –î–∞–Ω–æ "user_A" —î –≤–ª–∞—Å–Ω–∏–∫–æ–º —Å–ø–∏—Å–∫—É "collection_1"
    –ö–æ–ª–∏ "user" –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å "collection_1"
    –Ü –í—ñ–Ω –Ω–∞—Ç–∏—Å–∫–∞—î "–í–∏–¥–∞–ª–∏—Ç–∏ —Å–ø–∏—Å–æ–∫"
    –Ü –í—ñ–Ω –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –¥—ñ—é
    –¢–æ–¥—ñ –ü–æ–ª–µ "DeletedAt" –¥–ª—è "collection_1" –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å
    # –ó–∞–≤–¥—è–∫–∏ Global Query Filter, —Å–ø–∏—Å–æ–∫ –∑–Ω–∏–∫–Ω–µ –∑–≤—ñ–¥—É—Å—ñ–ª—å

# ---
# 
# üõ†Ô∏è –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è Backend (.Net / EF / Postgres)
#
# 1.  **BaseEntity (–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è):**
#     * –°—Ç–≤–æ—Ä–∏—Ç–∏ `BaseEntity` –∑: `Id` (Guid v7), `CreatedAt`, `UpdatedAt`, `DeletedAt` (nullable).
#     * –£—Å–ø–∞–¥–∫—É–≤–∞—Ç–∏ `Collections` —Ç–∞ `CollectionItems` –≤—ñ–¥ `BaseEntity`.
#     * –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **Global Query Filter** –≤ EF Core: `.Where(e => e.DeletedAt == null)` –¥–ª—è –≤—Å—ñ—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π, —â–æ —É—Å–ø–∞–¥–∫–æ–≤—É—é—Ç—å `BaseEntity`.
#
# 2.  **–ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö: `Collections`**
#     * –£—Å–ø–∞–¥–∫–æ–≤—É—î `BaseEntity`.
#     * `OwnerId` (Guid, FK –¥–æ `Users.Id`).
#     * `Name` (string, Not null).
#     * `Description` (string, nullable).
#     * `PrivacyLevel` (enum: `Private = 0`, `Public = 1`) - Default: `Public` (–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è BRL-6).
#
# 3.  **[–ù–û–í–ê] –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö: `CollectionAccess`**
#     * **–ù–ï** —É—Å–ø–∞–¥–∫–æ–≤—É—î `BaseEntity`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –∂–æ—Ä—Å—Ç–∫–∏–º.
#     * `Id` (Guid v7, PK).
#     * `CollectionId` (Guid, FK –¥–æ `Collections.Id`).
#     * `UserId` (Guid, FK –¥–æ `Users.Id`).
#     * `CreatedAt` (DateTime, `DateTime.UtcNow`).
#     * **–í–∞–∂–ª–∏–≤–æ:** –°—Ç–≤–æ—Ä–∏—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–∑–∏—Ç–Ω–∏–π —ñ–Ω–¥–µ–∫—Å `(CollectionId, UserId)`, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤.
#
# 4.  **[–ö–†–ò–¢–ò–ß–ù–û] –°–µ—Ä–≤—ñ—Å: `ICollectionAccessService`**
#     * –ü–æ—Ç—Ä—ñ–±–µ–Ω —Å–µ—Ä–≤—ñ—Å –¥–ª—è —ñ–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—ó —Å–∫–ª–∞–¥–Ω–æ—ó –ª–æ–≥—ñ–∫–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø—É.
#     * `bool CanView(Guid collectionId, Guid? currentUserId)`:
#         * 1. –û—Ç—Ä–∏–º–∞—Ç–∏ `collection` (—Ä–∞–∑–æ–º –∑ `OwnerId` —Ç–∞ `PrivacyLevel`).
#         * 2. –Ø–∫—â–æ `collection.PrivacyLevel == Public` -> `return true`.
#         * 3. –Ø–∫—â–æ `currentUserId == null` (–≥—ñ—Å—Ç—å) -> `return false`.
#         * 4. –Ø–∫—â–æ `collection.OwnerId == currentUserId` -> `return true`.
#         * 5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —ñ—Å–Ω—É—î –∑–∞–ø–∏—Å —É `CollectionAccess` (`WHERE CollectionId = collectionId AND UserId = currentUserId`).
#         * 6. –Ø–∫—â–æ —Ç–∞–∫ -> `return true`.
#         * 7. –í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É -> `return false`.
#     * `bool CanEdit(Guid collectionId, Guid? currentUserId)`:
#         * (–ó–∞—Ä–∞–∑) –ü–µ—Ä–µ–≤—ñ—Ä—è—î `collection.OwnerId == currentUserId`.
#
# 5.  **API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (Controller): `CollectionsController`**
#     * `POST /api/collections`: –°—Ç–≤–æ—Ä—é—î `Collection`. `OwnerId` –±–µ—Ä–µ—Ç—å—Å—è –∑ `HttpContext.User`.
#     * `PUT /api/collections/{id}`: –û–Ω–æ–≤–ª—é—î `Name`, `Description`, `PrivacyLevel`. *–ü–µ—Ä–µ–¥* –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `ICollectionAccessService.CanEdit(...)`.
#     * `DELETE /api/collections/{id}`: **Soft Delete** `Collection`. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `ICollectionAccessService.CanEdit(...)`.
#     * `GET /api/collections/{id}`: –û—Ç—Ä–∏–º—É—î 1 –∑–±—ñ—Ä–∫—É. *–ü–µ—Ä–µ–¥* –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `ICollectionAccessService.CanView(...)`.
#     * `GET /api/profiles/{username}/collections`: –û—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ—ñ–ª—é.
#         * **–õ–æ–≥—ñ–∫–∞:** –ú–∞—î –≤–∏–∫–æ–Ω–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω–∏–π `JOIN`:
#           `SELECT c FROM Collections c LEFT JOIN CollectionAccess ca ON c.Id = ca.CollectionId`
#           `WHERE (c.OwnerId = {profile_user_id} AND (c.PrivacyLevel = 'Public' OR c.OwnerId = {current_user_id} OR ca.UserId = {current_user_id}))`
#           `AND c.DeletedAt IS NULL` (Global Query Filter –º–∞—î —Ü–µ –∑—Ä–æ–±–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ).
#
# 6.  **API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (Controller): `CollectionAccessController`** (–ê–±–æ –≤ `CollectionsController`)
#     * `GET /api/collections/{id}/access`: –ü–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ `User` (–∞–±–æ `UserDto`), —è–∫—ñ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø (–∑ `CollectionAccess`). –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `CanEdit`.
#     * `POST /api/collections/{id}/access`: **[–ù–û–í–ò–ô]** –ï–Ω–¥–ø–æ—ñ–Ω—Ç –¥–ª—è US-804. –ü—Ä–∏–π–º–∞—î DTO `{"username": "user_B"}`. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `CanEdit`.
#     * `DELETE /api/collections/{id}/access/{userId}`: **[–ù–û–í–ò–ô]** –ï–Ω–¥–ø–æ—ñ–Ω—Ç –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É (–∂–æ—Ä—Å—Ç–∫–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑ `CollectionAccess`). –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `CanEdit`.
#
# 7.  **API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (Controller): `CollectionItemsController`**
#     * `POST /api/collections/{collectionId}/items`: –î–æ–¥–∞—î –º–µ–¥—ñ–∞ –¥–æ `CollectionItems`. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `CanEdit(collectionId)`.
#     * `DELETE /api/collection-items/{itemId}`: **Soft Delete** `CollectionItem`. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `CanEdit` –¥–ª—è –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ `collectionId`.
#
# ---
#
# üé® –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è Frontend (Svelte-kit)
#
# 1.  **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç (–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –º–µ–¥—ñ–∞): `AddToListButton.svelte`**
#     * –ö–Ω–æ–ø–∫–∞ (–Ω–∞–ø—Ä., —ñ–∫–æ–Ω–∫–∞ "+") –ø–æ—Ä—É—á —ñ–∑ `StatusButton.svelte`.
#     * –ü—Ä–∏ –∫–ª—ñ–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î `GET /api/collections/my` (—Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î *–ª–∏—à–µ* —Å–ø–∏—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ —é–∑–µ—Ä–∞).
#     * –ü–æ–∫–∞–∑—É—î –≤–∏–ø–∞–¥–∞—é—á–µ –º–µ–Ω—é/–º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ —Ü–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏.
#     * –ü—Ä–∏ –≤–∏–±–æ—Ä—ñ —Å–ø–∏—Å–∫—É: –≤–∏–∫–ª–∏–∫–∞—î `POST /api/collections/{collectionId}/items`.
#
# 2.  **–°—Ç–æ—Ä—ñ–Ω–∫–∞ –ü—Ä–æ—Ñ—ñ–ª—é (–í–∫–ª–∞–¥–∫–∞ "–°–ø–∏—Å–∫–∏"):**
#     * –î–æ–¥–∞—Ç–∏ –≤–∫–ª–∞–¥–∫—É "–°–ø–∏—Å–∫–∏" –Ω–∞ `src/routes/profile/[username]/+page.svelte`.
#     * –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î `GET /api/profiles/[username]/collections`.
#     * **–õ–æ–≥—ñ–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É (US-803/804):**
#         * –§—Ä–æ–Ω—Ç–µ–Ω–¥—É –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞—Ç–∏ *—á–æ–º—É* –≤—ñ–Ω –±–∞—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ (—á–∏ —Ç–æ –≤—ñ–Ω –ø—É–±–ª—ñ—á–Ω–∏–π, —á–∏ —Ç–æ –π–æ–º—É –Ω–∞–¥–∞–ª–∏ –¥–æ—Å—Ç—É–ø) - –±–µ–∫–µ–Ω–¥ –≤–∂–µ –≤–∏–∫–æ–Ω–∞–≤ –≤—Å—é —Å–∫–ª–∞–¥–Ω—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é.
#         * –Ø–∫—â–æ `data.profile.username === $page.data.user.username`, –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø–æ–∑–Ω–∞—á–∫—É "(–ü—Ä–∏–≤–∞—Ç–Ω–∏–π)" –¥–ª—è —Å–ø–∏—Å–∫—ñ–≤ –∑ `privacyLevel: 'Private'`.
#
# 3.  **[–ù–û–í–ò–ô] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `ShareModal.svelte`**
#     * –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ (US-804), —è–∫–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î `GET /api/collections/[id]/access`.
#     * –ü–æ–∫–∞–∑—É—î:
#         * 1. –í–∏–ø–∞–¥–∞—é—á–∏–π —Å–ø–∏—Å–æ–∫ (`<select>`) –∑ –±–∞–∑–æ–≤–∏–º —Ä—ñ–≤–Ω–µ–º: "–ü—É–±–ª—ñ—á–Ω–∏–π" / "–ü—Ä–∏–≤–∞—Ç–Ω–∏–π (–ª–∏—à–µ –∑–∞–ø—Ä–æ—à–µ–Ω—ñ)". (–í–∏–∫–ª–∏–∫–∞—î `PUT /api/collections/{id}`).
#         * 2. –ü–æ–ª–µ "–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤": `<input>` –¥–ª—è –ø–æ—à—É–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–º–∞—î –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `GET /api/users/search?q=...`).
#         * 3. –ü—Ä–∏ –≤–∏–±–æ—Ä—ñ —é–∑–µ—Ä–∞ -> `POST /api/collections/{id}/access`.
#         * 4. –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—ñ –≤–∂–µ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø.
#         * 5. –ö–Ω–æ–ø–∫–∞ "–í–∏–¥–∞–ª–∏—Ç–∏ –¥–æ—Å—Ç—É–ø" –±—ñ–ª—è –∫–æ–∂–Ω–æ–≥–æ (–≤–∏–∫–ª–∏–∫–∞—î `DELETE /api/collections/{id}/access/{userId}`).
#
# 4.  **–ú–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è CRUD –°–ø–∏—Å–∫—ñ–≤:**
#     * `src/routes/collections/new`: –§–æ—Ä–º–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É.
#     * `src/routes/collections/[id]/+page.svelte`: –ü–æ–∫–∞–∑ –≤–º—ñ—Å—Ç—É —Å–ø–∏—Å–∫—É. –ú–∞—î –∫–Ω–æ–ø–∫—É "–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø", —è–∫—â–æ `data.collection.ownerId === $page.data.user.id`.
#     * `src/routes/collections/[id]/settings`: (–ú–æ–∂–ª–∏–≤–æ, –æ–±'—î–¥–Ω–∞–Ω–æ –∑ `ShareModal`). –°—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è `Name`, `Description` —Ç–∞ –∫–Ω–æ–ø–∫–∞ "–í–∏–¥–∞–ª–∏—Ç–∏ —Å–ø–∏—Å–æ–∫" (–∑ –º–æ–¥–∞–ª—å–Ω–∏–º –≤—ñ–∫–Ω–æ–º –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è).
#