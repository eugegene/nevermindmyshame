# Мова: uk
@epic1 @auth
Функціонал: Реєстрація користувача
  Як Гість (неавторизований користувач),
  Я хочу мати можливість зареєструвати новий обліковий запис,
  Щоб отримати доступ до повного функціоналу сайту.

  Передумова: Гість на сторінці реєстрації
    Дано Гість знаходиться на сторінці "/register"

  @happy-path @us-101
  Сценарій: Успішна реєстрація нового користувача
    І Гість вводить наступні валідні дані:
      | Поле                | Значення         |
      | Нікнейм             | new_user         |
      | Email               | user@example.com |
      | Пароль              | Password123      |
      | Підтвердження пароля | Password123      |
      | Ім'я                | Тест Тестенко    |
      | Вік                 | 25               |
      | Стать               | Чоловік          |
      | Країна              | Україна          |
    Коли Гість натискає кнопку "Зареєструватися"
    Тоді Система створює нового користувача "new_user" в базі даних
    І Система хешує пароль користувача
    І Користувач "new_user" автоматично авторизований
    І Користувача перенаправлено на головну сторінку "/"

  @negative-path @us-101
  Сценарій: Реєстрація з нікнеймом, що вже існує
    І В базі даних існує користувач з нікнеймом "existing_user"
    Коли Гість намагається зареєструватися з нікнеймом "existing_user"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Цей нікнейм вже зайнятий"

  @negative-path @us-101
  Сценарій: Реєстрація з email, що вже існує
    І В базі даних існує користувач з email "taken@example.com"
    Коли Гість намагається зареєструватися з email "taken@example.com"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Ця email-адреса вже зайнята"

  @negative-path @us-101
  Сценарій: Реєстрація з невідповідними паролями
    Коли Гість вводить "Password123" в поле "Пароль"
    І Гість вводить "Password456" в поле "Підтвердження пароля"
    І Гість натискає кнопку "Зареєструватися"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Паролі не збігаються"

  @negative-path @us-101 @brl-2
  Сценарій: Реєстрація з паролем, що не відповідає політиці безпеки (BRL-2)
    Коли Гість вводить пароль "pass"
    І Гість натискає кнопку "Зареєструватися"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Пароль повинен містити щонайменше 8 символів, включаючи літери та цифри або спеціальні символи (!@#$%^&_-=+ і т.д.)"

  @negative-path @us-101
  Сценарій: Реєстрація з незаповненими обов'язковими полями
    Коли Гість залишає поле "Нікнейм" порожнім
    І Гість залишає поле "Email" порожнім
    І Гість залишає поле "Пароль" порожнім
    І Гість натискає кнопку "Зареєструватися"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Це поле є обов'язковим" біля поля "Нікнейм"
    І Система показує повідомлення про помилку "Це поле є обов'язковим" біля поля "Електронна пошта"
    І Система показує повідомлення про помилку "Це поле є обов'язковим" біля поля "Пароль"

  @us-101 @negative-path @security
  Сценарій: Реєстрація з використанням зарезервованого (системного) нікнейму
    Дано Гість знаходиться на сторінці "/register"
    Коли Гість намагається зареєструватися з нікнеймом "admin"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Цей нікнейм зарезервовано. Будь ласка, оберіть інший."

  @us-101 @negative-path @security
  Сценарій: Реєстрація з використанням зарезервованого нікнейму (інший регістр)
    Дано Гість знаходиться на сторінці "/register"
    Коли Гість намагається зареєструватися з нікнеймом "Moderator"
    Тоді Система не створює нового користувача
    І Система показує повідомлення про помилку "Цей нікнейм зарезервовано. Будь ласка, оберіть інший."

# --- Сценарії Авторизації (US-102) ---

  @us-102 @happy-path
  Сценарій: Успішна авторизація (Логін)
    Дано Гість знаходиться на сторінці "/login"
    Коли Гість вводить "user" в поле "Нікнейм або Email"
    І Гість вводить "Password123" в поле "Пароль"
    І Гість натискає кнопку "Увійти"
    Тоді Користувач "user" авторизований
    І Користувача перенаправлено на головну сторінку "/"

  @us-102 @happy-path
  Сценарій: Успішна авторизація через Email
    Дано Гість знаходиться на сторінці "/login"
    Коли Гість вводить "user@app.com" в поле "Нікнейм або Email"
    І Гість вводить "Password123" в поле "Пароль"
    # ... (решта кроків) ...

  @us-102 @negative-path
  Сценарій: Невдала авторизація (Неправильний пароль)
    Дано Гість знаходиться на сторінці "/login"
    Коли Гість вводить "user" в поле "Нікнейм або Email"
    І Гість вводить "WrongPassword" в поле "Пароль"
    І Гість натискає кнопку "Увійти"
    Тоді Користувач не авторизований
    І Система показує повідомлення про помилку "Неправильний логін або пароль"

  @us-102 @negative-path
  Сценарій: Невдала авторизація (Користувач не існує)
    Дано Гість знаходиться на сторінці "/login"
    Коли Гість вводить "non_existent_user" в поле "Нікнейм або Email"
    І Гість вводить "Password123" в поле "Пароль"
    # ... (решта кроків) ...
    Тоді Система показує повідомлення про помилку "Неправильний логін або пароль"

# --- Сценарій Виходу (US-103) ---

  @us-103 @happy-path
  Сценарій: Успішний вихід (Logout)
    Дано Користувач "user" авторизований в системі
    Коли Користувач натискає кнопку "Вийти" (наприклад, у своєму профілі)
    Тоді Сесія користувача завершена
    І Користувача перенаправлено на головну сторінку "/"